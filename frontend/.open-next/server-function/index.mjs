import { createRequire as topLevelCreateRequire } from 'module';const require = topLevelCreateRequire(import.meta.url);import url from 'url';const __dirname = url.fileURLToPath(new URL('.', import.meta.url));
var pe=Object.create;var b=Object.defineProperty;var ge=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty;var C=(o=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(o,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):o)(function(o){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+o+'" is not supported')});var E=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var we=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of me(e))!be.call(o,r)&&r!==t&&b(o,r,{get:()=>e[r],enumerable:!(s=ge(e,r))||s.enumerable});return o};var xe=(o,e,t)=>(t=o!=null?pe(qe(o)):{},we(e||!o||!o.__esModule?b(t,"default",{value:o,enumerable:!0}):t,o));var x=E((xo,w)=>{"use strict";w.exports=async function(e,t,...s){return await new Promise((r,i)=>{if(e.finished||e.complete){r();return}let n=!1;function c(O){n||(n=!0,e.removeListener("error",c),e.removeListener("end",c),e.removeListener("finish",c),O?i(O):r())}e.once("error",c),e.once("end",c),e.once("finish",c)}),typeof t=="function"?await t(e,...s):typeof t=="object"&&t!==null&&Object.assign(e,t),e}});var k=E((Bo,j)=>{"use strict";var Be=C("http"),B=`\r
\r
`,T=Symbol(),f=Symbol();function Pe(o){if(Buffer.isBuffer(o))return o.toString("utf8");if(typeof o=="string")return o;throw new Error(`response.write() of unexpected type: ${typeof o}`)}function P(o,e){if(Buffer.isBuffer(e)||typeof e=="string"||e instanceof Uint8Array)o[T].push(Buffer.from(e));else throw new Error(`response.write() of unexpected type: ${typeof e}`)}j.exports=class R extends Be.ServerResponse{static from(e){let t=new R(e);return t.statusCode=e.statusCode,t[f]=e.headers,t[T]=[Buffer.from(e.body)],t.end(),t}static body(e){return Buffer.concat(e[T])}static headers(e){let t=typeof e.getHeaders=="function"?e.getHeaders():e._headers;return Object.assign(t,e[f])}get headers(){return this[f]}setHeader(e,t){this._wroteHeader?this[f][e]=t:super.setHeader(e,t)}writeHead(e,t,s){let r=typeof t=="string"?s:t;for(let i in r)if(this.setHeader(i,r[i]),!this._wroteHeader)break;super.writeHead(e,t,s)}constructor({method:e}){super({method:e}),this[T]=[],this[f]={},this.useChunkedEncodingByDefault=!1,this.chunkedEncoding=!1,this._header="",this.assignSocket({_writableState:{},writable:!0,on:Function.prototype,removeListener:Function.prototype,destroy:Function.prototype,cork:Function.prototype,uncork:Function.prototype,write:(t,s,r)=>{if(typeof s=="function"&&(r=s,s=null),this._header===""||this._wroteHeader)P(this,t);else{let i=Pe(t),n=i.indexOf(B);if(n!==-1){let c=i.slice(n+B.length);c&&P(this,c),this._wroteHeader=!0}}typeof r=="function"&&r()}}),this.once("finish",()=>{this.emit("close")})}}});var H=E((Po,_)=>{"use strict";var Re=C("http"),h=k();function u(o){return e=>{let t=new h(e);return o(e,t),t}}_.exports=function(e){if(e instanceof Re.Server)return t=>{let s=new h(t);return e.emit("request",t,s),s};if(typeof e.callback=="function")return u(e.callback());if(typeof e.handle=="function")return u((t,s)=>{e.handle(t,s)});if(typeof e.handler=="function")return u((t,s)=>{e.handler(t,s)});if(typeof e._onRequest=="function")return u((t,s)=>{e._onRequest(t,s)});if(typeof e=="function")return u(e);if(e.router&&typeof e.router.route=="function")return u((t,s)=>{let{url:r,method:i,headers:n,body:c}=t;e.router.route({url:r,method:i,headers:n,body:c},s)});if(e._core&&typeof e._core._dispatch=="function")return u(e._core._dispatch({app:e}));if(typeof e.inject=="function")return async t=>{let{method:s,url:r,headers:i,body:n}=t,c=await e.inject({method:s,url:r,headers:i,payload:n});return h.from(c)};if(typeof e.main=="function")return u(e.main);throw new Error("Unsupported framework")}});var U=E((Ro,L)=>{"use strict";function N(o="/",e){if(e){let t=o.indexOf(e);if(t>-1)return o.substr(t+e.length)||"/"}return o}function V(o){return typeof o=="string"||o instanceof String}function A(o){if(!V(o))return o;let e;try{e=decodeURIComponent(o.replace(/[+]/g,"%20"))}catch{e=o.replace(/[+]/g,"%20")}return e}function d(o){if(V(o))return A(o);if(Array.isArray(o)){let e=[];for(let t in o)e.push(d(o[t]));return e}else if(o instanceof Object){let e={};for(let t of Object.keys(o))e[A(t)]=d(o[t]);return e}return o}L.exports=function(e,t){let s=e||{};return s.requestContext=s.requestContext||{},s.body=s.body||"",s.headers=s.headers||{},"elb"in s.requestContext&&(s.multiValueQueryStringParameters&&(s.multiValueQueryStringParameters=d(s.multiValueQueryStringParameters)),s.queryStringParameters&&(s.queryStringParameters=d(s.queryStringParameters))),s.version==="2.0"?(s.requestContext.authorizer=s.requestContext.authorizer||{},s.requestContext.http.method=s.requestContext.http.method||"GET",s.rawPath=N(s.requestPath||s.rawPath,t.basePath)):(s.requestContext.identity=s.requestContext.identity||{},s.httpMethod=s.httpMethod||"GET",s.path=N(s.requestPath||s.path,t.basePath)),s}});var y=E((_o,D)=>{"use strict";var je=C("http");D.exports=class extends je.IncomingMessage{constructor({method:e,url:t,headers:s,body:r,remoteAddress:i}){super({encrypted:!0,readable:!1,remoteAddress:i,address:()=>({port:443}),end:Function.prototype,destroy:Function.prototype}),typeof s["content-length"]>"u"&&(s["content-length"]=Buffer.byteLength(r)),Object.assign(this,{ip:i,complete:!0,httpVersion:"1.1",httpVersionMajor:"1",httpVersionMinor:"1",method:e,headers:s,body:r,url:t}),this._read=()=>{this.push(r),this.push(null)}}}});var z=E((Ho,Y)=>{"use strict";var F=C("url"),_e=y();function He(o){return o.version==="2.0"?o.requestContext.http.method:o.httpMethod}function Ne(o){return o.version==="2.0"?o.requestContext.http.sourceIp:o.requestContext.identity.sourceIp}function Ae(o){let e=o.version==="2.0"&&Array.isArray(o.cookies)?{cookie:o.cookies.join("; ")}:{};return o.multiValueHeaders?Object.keys(o.multiValueHeaders).reduce((t,s)=>(t[s.toLowerCase()]=o.multiValueHeaders[s].join(", "),t),e):Object.keys(o.headers).reduce((t,s)=>(t[s.toLowerCase()]=o.headers[s],t),e)}function Ve(o){let e=typeof o.body;if(Buffer.isBuffer(o.body))return o.body;if(e==="string")return Buffer.from(o.body,o.isBase64Encoded?"base64":"utf8");if(e==="object")return Buffer.from(JSON.stringify(o.body));throw new Error(`Unexpected event.body type: ${typeof o.body}`)}function Le(o){if(o.version==="2.0")return F.format({pathname:o.rawPath,search:o.rawQueryString});let e=o.multiValueQueryStringParameters||{};return o.queryStringParameters&&Object.keys(o.queryStringParameters).forEach(t=>{Array.isArray(e[t])?e[t].includes(o.queryStringParameters[t])||e[t].push(o.queryStringParameters[t]):e[t]=[o.queryStringParameters[t]]}),F.format({pathname:o.path,query:e})}Y.exports=(o,e,t)=>{let s=He(o),r=Ne(o),i=Ae(o),n=Ve(o),c=Le(o);if(typeof t.requestId=="string"&&t.requestId.length>0){let S=t.requestId.toLowerCase(),a=i[S]||o.requestContext.requestId;a&&(i[S]=a)}let O=new _e({method:s,headers:i,body:n,remoteAddress:r,url:c});return O.requestContext=o.requestContext,O.apiGateway={event:o,context:e},O}});var J=E((No,$)=>{"use strict";var Ue=["gzip","deflate","br"],De=(process.env.BINARY_CONTENT_TYPES||"").split(",");function Fe(o){let e=o["content-encoding"];if(typeof e=="string")return e.split(",").some(t=>Ue.some(s=>t.indexOf(s)!==-1))}function Ye(o,e){let t=[].concat(e.binary?e.binary:De).map(r=>new RegExp(`^${r.replace(/\*/g,".*")}$`)),s=(o["content-type"]||"").split(";")[0];return!!s&&t.some(r=>r.test(s))}$.exports=function(e,t){return t.binary===!1?!1:t.binary===!0?!0:typeof t.binary=="function"?t.binary(e):Fe(e)||Ye(e,t)}});var G=E((Ao,M)=>{"use strict";M.exports=function(e){return Object.keys(e).reduce((t,s)=>{let r=e[s];return Array.isArray(r)?(t.multiValueHeaders[s]=r,s.toLowerCase()!=="set-cookie"&&(t.headers[s]=r.join(", "))):t.headers[s]=r==null?"":r.toString(),t},{headers:{},multiValueHeaders:{}})}});var W=E((Vo,Q)=>{"use strict";var ze=J(),p=k(),$e=G();Q.exports=(o,e,t)=>{let{statusCode:s}=e,{headers:r,multiValueHeaders:i}=$e(p.headers(e)),n=[];i["set-cookie"]&&(n=i["set-cookie"]);let c=ze(r,t),O=c?"base64":"utf8",S=p.body(e).toString(O);if(r["transfer-encoding"]==="chunked"||e.chunkedEncoding){let l=p.body(e).toString().split(`\r
`),m=[];for(let I=0;I<l.length;I+=2){let ye=parseInt(l[I],16),q=l[I+1];q&&m.push(q.substring(0,ye))}S=m.join("")}let a={statusCode:s,headers:r,isBase64Encoded:c,body:S};return o.version==="2.0"&&n.length&&(a.cookies=n),(!o.version||o.version==="1.0")&&Object.keys(i).length&&(a.multiValueHeaders=i),a}});var Z=E((Lo,X)=>{var Je=U(),Me=z(),Ge=W();X.exports=o=>e=>async(t,s={})=>{let r=Je(t,o),i=Me(r,s,o),n=await e(i,r,s);return Ge(r,n,o)}});var ee=E((Uo,v)=>{"use strict";function Qe({requestPath:o,url:e}){return o||(typeof e=="string"?e:"/")}function We(o){let e={};e.identity={};let t=o.headers["x-forwarded-for"],s=o.headers["client-ip"],r=t||s||"";return r&&(e.identity.sourceIp=r.split(":")[0]),e}v.exports=function(e,t){let s=e||{};if(s.requestContext=We(e),s.method=s.method||"GET",s.url=Qe(s),s.body=s.body||"",s.headers=s.headers||{},t.basePath){let r=s.url.indexOf(t.basePath);r>-1&&(s.url=s.url.substr(r+t.basePath.length))}return s}});var te=E((Do,oe)=>{"use strict";var Xe=C("url"),Ze=y();function ve(o){return Object.keys(o.headers).reduce((e,t)=>(e[t.toLowerCase()]=o.headers[t],e),{})}function eo(o){let e=typeof o.rawBody;if(Buffer.isBuffer(o.rawBody))return o.rawBody;if(e==="string")return Buffer.from(o.rawBody,"utf8");if(e==="object")return Buffer.from(JSON.stringify(o.rawBody));throw new Error(`Unexpected request.body type: ${typeof o.rawBody}`)}oe.exports=o=>{let e=o.method,t=o.query,s=ve(o),r=eo(o),i=new Ze({method:e,headers:s,body:r,url:Xe.format({pathname:o.url,query:t})});return i.requestContext=o.requestContext,i}});var re=E((Fo,se)=>{"use strict";var oo=["gzip","deflate","br"],to=(process.env.BINARY_CONTENT_TYPES||"").split(",");function so(o){let e=o["content-encoding"];if(typeof e=="string")return e.split(",").some(t=>oo.some(s=>t.indexOf(s)!==-1))}function ro(o,e){let t=[].concat(e.binary?e.binary:to).map(r=>new RegExp(`^${r.replace(/\*/g,".*")}$`)),s=(o["content-type"]||"").split(";")[0];return!!s&&t.some(r=>r.test(s))}se.exports=function(e,t){return t.binary===!1?!1:t.binary===!0?!0:typeof t.binary=="function"?t.binary(e):so(e)||ro(e,t)}});var ie=E((Yo,io)=>{io.exports={variations:["set-cookie","Set-cookie","sEt-cookie","SEt-cookie","seT-cookie","SeT-cookie","sET-cookie","SET-cookie","set-Cookie","Set-Cookie","sEt-Cookie","SEt-Cookie","seT-Cookie","SeT-Cookie","sET-Cookie","SET-Cookie","set-cOokie","Set-cOokie","sEt-cOokie","SEt-cOokie","seT-cOokie","SeT-cOokie","sET-cOokie","SET-cOokie","set-COokie","Set-COokie","sEt-COokie","SEt-COokie","seT-COokie","SeT-COokie","sET-COokie","SET-COokie","set-coOkie","Set-coOkie","sEt-coOkie","SEt-coOkie","seT-coOkie","SeT-coOkie","sET-coOkie","SET-coOkie","set-CoOkie","Set-CoOkie","sEt-CoOkie","SEt-CoOkie","seT-CoOkie","SeT-CoOkie","sET-CoOkie","SET-CoOkie","set-cOOkie","Set-cOOkie","sEt-cOOkie","SEt-cOOkie","seT-cOOkie","SeT-cOOkie","sET-cOOkie","SET-cOOkie","set-COOkie","Set-COOkie","sEt-COOkie","SEt-COOkie","seT-COOkie","SeT-COOkie","sET-COOkie","SET-COOkie","set-cooKie","Set-cooKie","sEt-cooKie","SEt-cooKie","seT-cooKie","SeT-cooKie","sET-cooKie","SET-cooKie","set-CooKie","Set-CooKie","sEt-CooKie","SEt-CooKie","seT-CooKie","SeT-CooKie","sET-CooKie","SET-CooKie","set-cOoKie","Set-cOoKie","sEt-cOoKie","SEt-cOoKie","seT-cOoKie","SeT-cOoKie","sET-cOoKie","SET-cOoKie","set-COoKie","Set-COoKie","sEt-COoKie","SEt-COoKie","seT-COoKie","SeT-COoKie","sET-COoKie","SET-COoKie","set-coOKie","Set-coOKie","sEt-coOKie","SEt-coOKie","seT-coOKie","SeT-coOKie","sET-coOKie","SET-coOKie","set-CoOKie","Set-CoOKie","sEt-CoOKie","SEt-CoOKie","seT-CoOKie","SeT-CoOKie","sET-CoOKie","SET-CoOKie","set-cOOKie","Set-cOOKie","sEt-cOOKie","SEt-cOOKie","seT-cOOKie","SeT-cOOKie","sET-cOOKie","SET-cOOKie","set-COOKie","Set-COOKie","sEt-COOKie","SEt-COOKie","seT-COOKie","SeT-COOKie","sET-COOKie","SET-COOKie","set-cookIe","Set-cookIe","sEt-cookIe","SEt-cookIe","seT-cookIe","SeT-cookIe","sET-cookIe","SET-cookIe","set-CookIe","Set-CookIe","sEt-CookIe","SEt-CookIe","seT-CookIe","SeT-CookIe","sET-CookIe","SET-CookIe","set-cOokIe","Set-cOokIe","sEt-cOokIe","SEt-cOokIe","seT-cOokIe","SeT-cOokIe","sET-cOokIe","SET-cOokIe","set-COokIe","Set-COokIe","sEt-COokIe","SEt-COokIe","seT-COokIe","SeT-COokIe","sET-COokIe","SET-COokIe","set-coOkIe","Set-coOkIe","sEt-coOkIe","SEt-coOkIe","seT-coOkIe","SeT-coOkIe","sET-coOkIe","SET-coOkIe","set-CoOkIe","Set-CoOkIe","sEt-CoOkIe","SEt-CoOkIe","seT-CoOkIe","SeT-CoOkIe","sET-CoOkIe","SET-CoOkIe","set-cOOkIe","Set-cOOkIe","sEt-cOOkIe","SEt-cOOkIe","seT-cOOkIe","SeT-cOOkIe","sET-cOOkIe","SET-cOOkIe","set-COOkIe","Set-COOkIe","sEt-COOkIe","SEt-COOkIe","seT-COOkIe","SeT-COOkIe","sET-COOkIe","SET-COOkIe","set-cooKIe","Set-cooKIe","sEt-cooKIe","SEt-cooKIe","seT-cooKIe","SeT-cooKIe","sET-cooKIe","SET-cooKIe","set-CooKIe","Set-CooKIe","sEt-CooKIe","SEt-CooKIe","seT-CooKIe","SeT-CooKIe","sET-CooKIe","SET-CooKIe","set-cOoKIe","Set-cOoKIe","sEt-cOoKIe","SEt-cOoKIe","seT-cOoKIe","SeT-cOoKIe","sET-cOoKIe","SET-cOoKIe","set-COoKIe","Set-COoKIe","sEt-COoKIe","SEt-COoKIe","seT-COoKIe","SeT-COoKIe","sET-COoKIe","SET-COoKIe","set-coOKIe","Set-coOKIe","sEt-coOKIe","SEt-coOKIe","seT-coOKIe","SeT-coOKIe","sET-coOKIe","SET-coOKIe","set-CoOKIe","Set-CoOKIe","sEt-CoOKIe","SEt-CoOKIe","seT-CoOKIe","SeT-CoOKIe","sET-CoOKIe","SET-CoOKIe","set-cOOKIe","Set-cOOKIe","sEt-cOOKIe","SEt-cOOKIe","seT-cOOKIe","SeT-cOOKIe","sET-cOOKIe","SET-cOOKIe","set-COOKIe","Set-COOKIe","sEt-COOKIe","SEt-COOKIe","seT-COOKIe","SeT-COOKIe","sET-COOKIe","SET-COOKIe","set-cookiE","Set-cookiE","sEt-cookiE","SEt-cookiE","seT-cookiE","SeT-cookiE","sET-cookiE","SET-cookiE","set-CookiE","Set-CookiE","sEt-CookiE","SEt-CookiE","seT-CookiE","SeT-CookiE","sET-CookiE","SET-CookiE","set-cOokiE","Set-cOokiE","sEt-cOokiE","SEt-cOokiE","seT-cOokiE","SeT-cOokiE","sET-cOokiE","SET-cOokiE","set-COokiE","Set-COokiE","sEt-COokiE","SEt-COokiE","seT-COokiE","SeT-COokiE","sET-COokiE","SET-COokiE","set-coOkiE","Set-coOkiE","sEt-coOkiE","SEt-coOkiE","seT-coOkiE","SeT-coOkiE","sET-coOkiE","SET-coOkiE","set-CoOkiE","Set-CoOkiE","sEt-CoOkiE","SEt-CoOkiE","seT-CoOkiE","SeT-CoOkiE","sET-CoOkiE","SET-CoOkiE","set-cOOkiE","Set-cOOkiE","sEt-cOOkiE","SEt-cOOkiE","seT-cOOkiE","SeT-cOOkiE","sET-cOOkiE","SET-cOOkiE","set-COOkiE","Set-COOkiE","sEt-COOkiE","SEt-COOkiE","seT-COOkiE","SeT-COOkiE","sET-COOkiE","SET-COOkiE","set-cooKiE","Set-cooKiE","sEt-cooKiE","SEt-cooKiE","seT-cooKiE","SeT-cooKiE","sET-cooKiE","SET-cooKiE","set-CooKiE","Set-CooKiE","sEt-CooKiE","SEt-CooKiE","seT-CooKiE","SeT-CooKiE","sET-CooKiE","SET-CooKiE","set-cOoKiE","Set-cOoKiE","sEt-cOoKiE","SEt-cOoKiE","seT-cOoKiE","SeT-cOoKiE","sET-cOoKiE","SET-cOoKiE","set-COoKiE","Set-COoKiE","sEt-COoKiE","SEt-COoKiE","seT-COoKiE","SeT-COoKiE","sET-COoKiE","SET-COoKiE","set-coOKiE","Set-coOKiE","sEt-coOKiE","SEt-coOKiE","seT-coOKiE","SeT-coOKiE","sET-coOKiE","SET-coOKiE","set-CoOKiE","Set-CoOKiE","sEt-CoOKiE","SEt-CoOKiE","seT-CoOKiE","SeT-CoOKiE","sET-CoOKiE","SET-CoOKiE","set-cOOKiE","Set-cOOKiE","sEt-cOOKiE","SEt-cOOKiE","seT-cOOKiE","SeT-cOOKiE","sET-cOOKiE","SET-cOOKiE","set-COOKiE","Set-COOKiE","sEt-COOKiE","SEt-COOKiE","seT-COOKiE","SeT-COOKiE","sET-COOKiE","SET-COOKiE","set-cookIE","Set-cookIE","sEt-cookIE","SEt-cookIE","seT-cookIE","SeT-cookIE","sET-cookIE","SET-cookIE","set-CookIE","Set-CookIE","sEt-CookIE","SEt-CookIE","seT-CookIE","SeT-CookIE","sET-CookIE","SET-CookIE","set-cOokIE","Set-cOokIE","sEt-cOokIE","SEt-cOokIE","seT-cOokIE","SeT-cOokIE","sET-cOokIE","SET-cOokIE","set-COokIE","Set-COokIE","sEt-COokIE","SEt-COokIE","seT-COokIE","SeT-COokIE","sET-COokIE","SET-COokIE","set-coOkIE","Set-coOkIE","sEt-coOkIE","SEt-coOkIE","seT-coOkIE","SeT-coOkIE","sET-coOkIE","SET-coOkIE","set-CoOkIE","Set-CoOkIE","sEt-CoOkIE","SEt-CoOkIE","seT-CoOkIE","SeT-CoOkIE","sET-CoOkIE","SET-CoOkIE","set-cOOkIE","Set-cOOkIE","sEt-cOOkIE","SEt-cOOkIE","seT-cOOkIE","SeT-cOOkIE","sET-cOOkIE","SET-cOOkIE","set-COOkIE","Set-COOkIE","sEt-COOkIE","SEt-COOkIE","seT-COOkIE","SeT-COOkIE","sET-COOkIE","SET-COOkIE","set-cooKIE","Set-cooKIE","sEt-cooKIE","SEt-cooKIE","seT-cooKIE","SeT-cooKIE","sET-cooKIE","SET-cooKIE","set-CooKIE","Set-CooKIE","sEt-CooKIE","SEt-CooKIE","seT-CooKIE","SeT-CooKIE","sET-CooKIE","SET-CooKIE","set-cOoKIE","Set-cOoKIE","sEt-cOoKIE","SEt-cOoKIE","seT-cOoKIE","SeT-cOoKIE","sET-cOoKIE","SET-cOoKIE","set-COoKIE","Set-COoKIE","sEt-COoKIE","SEt-COoKIE","seT-COoKIE","SeT-COoKIE","sET-COoKIE","SET-COoKIE","set-coOKIE","Set-coOKIE","sEt-coOKIE","SEt-coOKIE","seT-coOKIE","SeT-coOKIE","sET-coOKIE","SET-coOKIE","set-CoOKIE","Set-CoOKIE","sEt-CoOKIE","SEt-CoOKIE","seT-CoOKIE","SeT-CoOKIE","sET-CoOKIE","SET-CoOKIE","set-cOOKIE","Set-cOOKIE","sEt-cOOKIE","SEt-cOOKIE","seT-cOOKIE","SeT-cOOKIE","sET-cOOKIE","SET-cOOKIE","set-COOKIE","Set-COOKIE","sEt-COOKIE","SEt-COOKIE","seT-COOKIE","SeT-COOKIE","sET-COOKIE","SET-COOKIE"]}});var ce=E((zo,ne)=>{"use strict";var no=ie().variations;ne.exports=function(e){return Object.keys(e).reduce((t,s)=>{let r=e[s];return Array.isArray(r)?s.toLowerCase()==="set-cookie"?r.forEach((i,n)=>{t[no[n]]=i}):t[s]=r.join(", "):t[s]=r==null?"":r.toString(),t},{})}});var ue=E(($o,Oe)=>{var co=re(),Ee=k(),Eo=ce();Oe.exports=(o,e)=>{let{statusCode:t}=o,s=Eo(Ee.headers(o));if(s["transfer-encoding"]==="chunked"||o.chunkedEncoding)throw new Error("chunked encoding not supported");let r=co(s,e),i=r?"base64":"utf8",n=Ee.body(o).toString(i);return{status:t,headers:s,isBase64Encoded:r,body:n}}});var Se=E((Jo,ae)=>{var Oo=ee(),uo=te(),ao=ue();ae.exports=o=>e=>async(t,s)=>{let r=Oo(s,o),i=uo(r,o),n=await e(i,t,r);return t.log(n),ao(n,o)}});var Ie=E((Mo,fe)=>{var So=Z(),Co=Se(),Ce={aws:So,azure:Co};fe.exports=function(e){let{provider:t="aws"}=e;if(t in Ce)return Ce[t](e);throw new Error(`Unsupported provider ${t}`)}});var de=E((Go,ke)=>{"use strict";var Te=x(),fo=H(),Io=Ie(),To={requestId:"x-request-id"};ke.exports=function(o,e){let t=Object.assign({},To,e),s=fo(o);return Io(t)(async(i,...n)=>{await Te(i,t.request,...n);let c=await s(i);return await Te(c,t.response,...n),c})}});var he=xe(de(),1);import lo from"node:fs";import le from"node:path";import ho from"next/dist/server/next-server.js";import ko from"node:fs";import Ko from"node:path";function Ke(o){let e=Ko.join(o,"required-server-files.json"),t=ko.readFileSync(e,"utf-8"),{config:s}=JSON.parse(t);return s}function K(...o){}qo();var g=le.join(__dirname,".next"),yo=Ke(g),po=bo();K({nextDir:g});var go=new ho.default({conf:{...yo,compress:!1},customServer:!1,dev:!1,dir:__dirname,minimalMode:!0}).getRequestHandler(),mo=(0,he.default)(async(o,e)=>{await go(o,e).catch(t=>{console.error("NextJS request failed."),console.error(t),e.setHeader("Content-Type","application/json"),e.end(JSON.stringify({message:"Server failed to respond.",details:t},null,2))})},{binary:!0,provider:"aws",request:o=>{delete o.body}});async function rt(o,e){K(o);let t=JSON.parse(o.headers["x-op-middleware-request-headers"]||"{}");o.headers={...o.headers,...t};let s=await mo(o,e);po.includes(o.rawPath)&&!s.headers?.["cache-control"]&&(s.headers["cache-control"]="public, max-age=0, s-maxage=31536000, must-revalidate");let r=JSON.parse(o.headers["x-op-middleware-response-headers"]||"{}");return s.headers={...s.headers,...r},K("response headers",s.headers),s}function qo(){process.chdir(__dirname)}function bo(){let o=le.join(g,"server","pages-manifest.json"),e=lo.readFileSync(o,"utf-8");return Object.entries(JSON.parse(e)).filter(([t,s])=>s.endsWith(".html")).map(([t])=>t)}export{rt as handler};
